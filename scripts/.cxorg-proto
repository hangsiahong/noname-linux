#!/bin/sh
list=`curl -s http://www.linuxfromscratch.org/blfs/view/svn/x/x7proto.html | grep -P 'literal">[a-z0-9]+  \w+' -A 25 | cut -d ' ' -f 3 | sed 's/<\/code>//g'`
. ../ports/xorg-proto/Pkgfile
echo $list
echo $source
tfff=0
for i in ${list%EOF*}; do
	echo "$source" | grep -q -F "$i" || {
		sed -i -r "/${i%-*}.+tar.+/d" ../ports/xorg-proto/Pkgfile
		sed -i "s/source=\"/&\n$i/g" ../ports/xorg-proto/Pkgfile
		rm ../ports/xorg-proto/*${i%-*}*tar*
		tfff=1
	}
done
[ "$tfff" -eq 1 ] && {
	pkg -Muf xorg-proto
	pkg -M xorg-proto
	pkg -S xorg-proto
}
