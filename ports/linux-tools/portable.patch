--- a/tools/perf/util/util.h
+++ b/tools/perf/util/util.h
@@ -356,7 +356,7 @@
 		  size_t bytes_per_line, print_binary_t printer,
 		  void *extra);
 
-#if !defined(__GLIBC__) && !defined(__ANDROID__)
+#if 0
 extern int sched_getcpu(void);
 #endif
 
--- a/tools/perf/perf.h	2017-01-29 08:38:00.470694481 +0000
+++ b/tools/perf/perf.h	2017-01-29 08:38:00.470694481 +0000
@@ -4,6 +4,7 @@
 #include <time.h>
 #include <stdbool.h>
+#include <linux/compiler.h>
 #include <linux/types.h>
 #include <linux/perf_event.h>
 
 extern bool test_attr__enabled;
--- a/tools/perf/util/header.h	2016-12-11 19:17:54.000000000 +0000
+++ b/tools/perf/util/header.h	2016-12-11 19:17:54.000000000 +0000
@@ -1,6 +1,7 @@
 #ifndef __PERF_HEADER_H
 #define __PERF_HEADER_H
 
+#include <linux/compiler.h>
 #include <linux/perf_event.h>
 #include <sys/types.h>
 #include <stdbool.h>
--- a/tools/perf/arch/x86/util/tsc.c	2016-12-11 19:17:54.000000000 +0000
+++ a/tools/perf/arch/x86/util/tsc.c	2016-12-11 19:17:54.000000000 +0000
@@ -1,6 +1,7 @@
 #include <stdbool.h>
 #include <errno.h>
 
+#include <linux/compiler.h>
 #include <linux/perf_event.h>
 
 #include "../../perf.h"
--- a/tools/perf/arch/x86/util/pmu.c	2016-12-11 19:17:54.000000000 +0000
+++ b/tools/perf/arch/x86/util/pmu.c	2016-12-11 19:17:54.000000000 +0000
@@ -1,5 +1,6 @@
 #include <string.h>
 
+#include <linux/compiler.h>
 #include <linux/perf_event.h>
 
 #include "../../util/intel-pt.h"
--- a/tools/perf/util/auxtrace.c	2016-12-11 19:17:54.000000000 +0000
+++ b/tools/perf/util/auxtrace.c	2016-12-11 19:17:54.000000000 +0000
@@ -21,6 +21,7 @@
 #include <limits.h>
 #include <errno.h>
 
+#include <linux/compiler.h>
 #include <linux/kernel.h>
 #include <linux/perf_event.h>
 #include <linux/types.h>
--- a/tools/thermal/tmon/tmon.h	2016-12-11 19:17:54.000000000 +0000
+++ b/tools/thermal/tmon/tmon.h	2016-12-11 19:17:54.000000000 +0000
@@ -19,6 +19,9 @@
 #ifndef TMON_H
 #define TMON_H
 
+#include <pthread.h>
+#include <sys/time.h>
+
 #define MAX_DISP_TEMP 125
 #define MAX_CTRL_TEMP 105
 #define MIN_CTRL_TEMP 40
