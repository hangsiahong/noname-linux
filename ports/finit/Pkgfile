name=finit
version=git
deps="eudev dbus libuev libite run-parts"
desc="nice init"
source="rc.local
finit.conf"

ext() {
	git clone --depth=1 https://github.com/troglobit/finit
}

build() {
	cd finit
	autoreconf -fi
	./configure --prefix=/ --sbindir=/bin --disable-inetd --enable-rw-rootfs --enable-dbus-plugin --disable-alsa-utils-plugin --enable-x11-common-plugin --enable-resolvconf-plugin --enable-fallback-shell --enable-progress
	make  || die
	make DESTDIR="$pkgdir" install  || die
	mkdir -p "$pkgdir"/etc
	cp ../finit.conf "$pkgdir"/etc/finit.conf
	install -Dm755 ../rc.local "$pkgdir"/etc/rc.local
	mkdir -p "$pkgdir"/etc/init.d
}
