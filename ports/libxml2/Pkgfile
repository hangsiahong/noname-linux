name=libxml2
version=2.9.4+96+gfb56f80e
deps="zlib xz readline python"
desc="XML library version 2"

ext() {
	git clone https://git.gnome.org/browse/libxml2
	cd libxml2
	git reset --hard ${version#*+g}
}

build() {
	cd libxml2
	NOCONFIGURE=1 ./autogen.sh
	./configure --prefix= --disable-static --with-threads --with-history
	sed -i -e 's/ -shared / -Wl,-O1,--as-needed\0 /g' libtool
	make || die
	make DESTDIR="$pkgdir" install || die
	rm -r "$pkgdir"/share/doc
	rm -r "$pkgdir"/share/gtk-doc
}
