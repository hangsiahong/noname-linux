name=python-cython
version=0.25.2
deps="python-setuptools python3"
source="https://github.com/cython/cython/archive/$version.tar.gz"
desc="C-Extensions for Python"

build() {
	cp -r cython-$version cython3
	cd cython-$version
	/bin/python setup.py build || die
	/bin/python setup.py install \
		--prefix= \
		--root=$pkgdir \
		--optimize=1 \
		--skip-build || die
	for f in cygdb cython cythonize; do
		mv "$pkgdir"/bin/$f "$pkgdir"/bin/${f}2 || die
	done

	cd ../cython3
	/bin/python3 setup.py build || die
	/bin/python3 setup.py install \
		--prefix= \
		--root=$pkgdir \
		--optimize=1 \
		--skip-build || die

	for f in cygdb cython cythonize; do
		mv "$pkgdir"/bin/$f "$pkgdir"/bin/${f}3 || die
	done

	for f in cygdb cython cythonize; do
		ln -s "$pkgdir"/bin/${f}2 "$pkgdir"/bin/${f} || die
	done
}

