name=python-beaker
version=1.8.1
deps="python-setuptools"
desc="Caching and sessions WSGI middleware for use with web applications and stand-alone Python scripts and applications"
source="https://github.com/bbangert/beaker/archive/$version.tar.gz"

build() {
	cp -r beaker-$version 3
	sed -i "s#/usr/bin/python#/bin/python#" beaker-$version/beaker/crypto/pbkdf2.py
	sed -i "s#/usr/bin/python#/bin/python3#" 3/beaker/crypto/pbkdf2.py
	cd beaker-$version
	/bin/python setup.py build || die
	/bin/python setup.py install \
		--prefix= \
		--root=$pkgdir \
		--optimize=1 \
		--skip-build || die
	cd ../3
	/bin/python3 setup.py build || die
	/bin/python3 setup.py install \
		--prefix= \
		--root=$pkgdir \
		--optimize=1 \
		--skip-build || die
}

